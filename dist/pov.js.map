{"version":3,"sources":["../src/pov.js"],"names":["getter","o","field","setter","v","array","_get","_set","mapper","unmapped","_mapped","get","map","set","mapped","newMapped","inject","push","pov","addGetterSetter","name","select","Object","defineProperty","result","configurable","enumerable","source","value","writable","mapping","options","clone","from","keys","forEach","key","eject","reduce","ejectable","assign","_pov"],"mappings":"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","sourcesContent":["const getter = (o, field) => o[field];\n\nconst setter = (o, field, v) => {\n  o[field] = v;\n};\n\nconst array = (_get = getter, _set = setter) => (\n  field,\n  mapper = unmapped => unmapped\n) => {\n  let _mapped = null;\n  return {\n    get: o => {\n      if (_mapped) return _mapped;\n      _mapped = (_get(o, field) || []).map(unmapped => mapper(unmapped));\n      return _mapped;\n    },\n    set: (o, v) => {\n      _mapped = [];\n      _set(\n        o,\n        field,\n        v.map(mapped => {\n          const unmapped = {};\n          const newMapped = mapper(unmapped);\n          newMapped.inject(mapped);\n          _mapped.push(newMapped);\n          return unmapped;\n        })\n      );\n    }\n  };\n};\n\nconst pov = (_get = getter, _set = setter) => (\n  source = {},\n  mapping = {},\n  options = {}\n) => {\n  function clone() {\n    return pov(_get, _set)(source, mapping);\n  }\n\n  function inject(from) {\n    from = from || {};\n    Object.keys(from).forEach(key => {\n      key in mapping && _set(this, key, _get(from, key));\n    });\n    return result;\n  }\n\n  function eject() {\n    return Object.keys(mapping).reduce((ejectable, key) => {\n      _set(ejectable, key, _get(this, key));\n      return ejectable;\n    }, {});\n  }\n\n  const result = {\n    array: array(_get, _set),\n    clone,\n    inject,\n    eject,\n    get source() {\n      return Object.assign({}, source);\n    }\n  };\n\n  function addGetterSetter(name, select) {\n    if (select) {\n      Object.defineProperty(result, name, {\n        configurable: false,\n        enumerable: true,\n        get: function() {\n          return select.get ? select.get(source) : _get(source, select);\n        },\n        set: function(value) {\n          if (select.set) select.set(source, value);\n          else _set(source, select, value);\n        }\n      });\n    } else {\n      Object.defineProperty(result, name, {\n        configurable: true,\n        enumerable: true,\n        writable: true\n      });\n    }\n  }\n\n  Object.keys(mapping).forEach(function(key) {\n    addGetterSetter(key, mapping[key]);\n  });\n\n  return result;\n};\nconst _pov = pov(getter, setter);\nexport default _pov;\nexport { pov, array, getter, setter };\n"],"file":"pov.js"}